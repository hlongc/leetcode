# React é¡¹ç›®å›½é™…åŒ–ï¼ˆi18nï¼‰å®Œæ•´æŒ‡å—

## ä¸€ã€å›½é™…åŒ–å¼€å‘æµç¨‹

### 1.1 æŠ€æœ¯é€‰å‹

åœ¨ React é¡¹ç›®ä¸­ï¼Œä¸»æµçš„å›½é™…åŒ–è§£å†³æ–¹æ¡ˆåŒ…æ‹¬ï¼š

- **react-i18next**ï¼šæœ€æµè¡Œçš„è§£å†³æ–¹æ¡ˆï¼ŒåŸºäº i18next
- **react-intl**ï¼šåŸºäº FormatJSï¼ŒåŠŸèƒ½å¼ºå¤§
- **next-i18next**ï¼šé’ˆå¯¹ Next.js ä¼˜åŒ–

**æ¨èæ–¹æ¡ˆ**ï¼šreact-i18nextï¼ˆç”Ÿæ€å®Œå–„ã€ç¤¾åŒºæ´»è·ƒã€æ”¯æŒ SSRï¼‰

### 1.2 å®Œæ•´å¼€å‘æµç¨‹

```
1. å®‰è£…ä¾èµ–
   â†“
2. é…ç½® i18n å®ä¾‹
   â†“
3. åˆ›å»ºç¿»è¯‘èµ„æºæ–‡ä»¶
   â†“
4. é›†æˆåˆ°åº”ç”¨
   â†“
5. åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
   â†“
6. å®ç°è¯­è¨€åˆ‡æ¢
   â†“
7. å¤„ç†æ ¼å¼åŒ–ï¼ˆæ—¥æœŸã€è´§å¸ç­‰ï¼‰
   â†“
8. æµ‹è¯•å’Œä¼˜åŒ–
```

### 1.3 åŸºç¡€é…ç½®ç¤ºä¾‹

```bash
# å®‰è£…ä¾èµ–
npm install react-i18next i18next
# å¦‚æœéœ€è¦æ£€æµ‹ç”¨æˆ·è¯­è¨€
npm install i18next-browser-languagedetector
# å¦‚æœéœ€è¦å¼‚æ­¥åŠ è½½ç¿»è¯‘æ–‡ä»¶
npm install i18next-http-backend
```

```javascript
// src/i18n/config.js
import i18n from "i18next";
import { initReactI18next } from "react-i18next";
import LanguageDetector from "i18next-browser-languagedetector";
import Backend from "i18next-http-backend";

// å¯¼å…¥ç¿»è¯‘èµ„æº
import translationEN from "./locales/en/translation.json";
import translationZH from "./locales/zh/translation.json";
import translationAR from "./locales/ar/translation.json";

const resources = {
  en: { translation: translationEN },
  zh: { translation: translationZH },
  ar: { translation: translationAR },
};

i18n
  // ä½¿ç”¨è¯­è¨€æ£€æµ‹å™¨
  .use(LanguageDetector)
  // å¼‚æ­¥åŠ è½½ç¿»è¯‘æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
  .use(Backend)
  // ä¼ é€’ i18n å®ä¾‹ç»™ react-i18next
  .use(initReactI18next)
  // åˆå§‹åŒ– i18next
  .init({
    resources,
    fallbackLng: "en", // é»˜è®¤è¯­è¨€
    debug: process.env.NODE_ENV === "development",

    // è¯­è¨€æ£€æµ‹é…ç½®
    detection: {
      order: ["localStorage", "navigator", "htmlTag"],
      caches: ["localStorage"],
    },

    interpolation: {
      escapeValue: false, // React å·²ç»å¤„ç†äº† XSS
    },

    // æ”¯æŒå‘½åç©ºé—´
    ns: ["translation", "common", "errors"],
    defaultNS: "translation",

    react: {
      useSuspense: true, // ä½¿ç”¨ Suspense ç»„ä»¶
    },
  });

export default i18n;
```

```javascript
// src/index.js
import React, { Suspense } from "react";
import ReactDOM from "react-dom/client";
import "./i18n/config"; // å¯¼å…¥ i18n é…ç½®
import App from "./App";

const root = ReactDOM.createRoot(document.getElementById("root"));
root.render(
  <Suspense fallback={<div>Loading...</div>}>
    <App />
  </Suspense>
);
```

---

## äºŒã€Unicode ç†è§£ä¸å®è·µ

### 2.1 ä»€ä¹ˆæ˜¯ Unicode

Unicode æ˜¯ä¸€ç§å­—ç¬¦ç¼–ç æ ‡å‡†ï¼Œä¸ºä¸–ç•Œä¸Šå¤§å¤šæ•°æ–‡å­—ç³»ç»Ÿä¸­çš„æ¯ä¸ªå­—ç¬¦åˆ†é…äº†å”¯ä¸€çš„æ•°å­—ç¼–å·ï¼ˆç ç‚¹ï¼‰ã€‚

**å…³é”®æ¦‚å¿µ**ï¼š

- **ç ç‚¹ï¼ˆCode Pointï¼‰**ï¼šU+0000 åˆ° U+10FFFF çš„å”¯ä¸€æ ‡è¯†ç¬¦
- **UTF-8ã€UTF-16ã€UTF-32**ï¼šä¸åŒçš„ç¼–ç æ–¹å¼
- **JavaScript ä½¿ç”¨ UTF-16** ç¼–ç 

### 2.2 React é¡¹ç›®ä¸­çš„ Unicode å®è·µ

```javascript
// 1. ç¡®ä¿æ–‡ä»¶ç¼–ç ä¸º UTF-8
// åœ¨ package.json æˆ–æ„å»ºå·¥å…·ä¸­ç¡®è®¤

// 2. HTML meta æ ‡ç­¾å£°æ˜å­—ç¬¦é›†
// public/index.html
<meta charset="UTF-8" />;

// 3. å¤„ç†å¤šè¯­è¨€å­—ç¬¦
const Example = () => {
  const messages = {
    en: "Hello",
    zh: "ä½ å¥½",
    ar: "Ù…Ø±Ø­Ø¨Ø§",
    ja: "ã“ã‚“ã«ã¡ã¯",
    emoji: "ğŸ‘‹ğŸŒ",
  };

  return <div>{messages.zh}</div>;
};

// 4. å¤„ç†ç‰¹æ®Šå­—ç¬¦çš„é•¿åº¦é—®é¢˜
const stringLength = (str) => {
  // é”™è¯¯æ–¹å¼ï¼š'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦'.length === 11
  // æ­£ç¡®æ–¹å¼ï¼šä½¿ç”¨ Array.from æˆ–æ‰©å±•è¿ç®—ç¬¦
  return Array.from(str).length; // 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦' æ­£ç¡®é•¿åº¦ä¸º 1
};

// 5. å­—ç¬¦ä¸²æ“ä½œ
const Example2 = () => {
  const text = "ä½ å¥½ä¸–ç•Œ";

  // æ­£ç¡®çš„å­—ç¬¦ä¸²åˆ‡å‰²
  const chars = [...text]; // ['ä½ ', 'å¥½', 'ä¸–', 'ç•Œ']

  // æ­£ç¡®çš„å­—ç¬¦ä¸²åè½¬
  const reversed = [...text].reverse().join(""); // 'ç•Œä¸–å¥½ä½ '

  return <div>{reversed}</div>;
};

// 6. æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„ Unicode æ”¯æŒ
const validateUsername = (username) => {
  // æ”¯æŒå„ç§è¯­è¨€å­—ç¬¦
  const regex = /^[\p{L}\p{N}_-]+$/u;
  return regex.test(username);
};
```

### 2.3 å¸¸è§ Unicode é—®é¢˜

```javascript
// é—®é¢˜1ï¼šEmoji ç»„åˆå­—ç¬¦ï¼ˆZWJ Zero-Width Joinerï¼‰
const text1 = "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦"; // å®¶åº­è¡¨æƒ…ï¼ˆç”±å¤šä¸ªemojié€šè¿‡é›¶å®½è¿æ¥ç¬¦ç»„åˆï¼‰
console.log(text1.length); // 11ï¼ˆUTF-16 ç¼–ç å•å…ƒæ•°é‡ï¼‰
console.log([...text1].length); // 7ï¼ˆ4ä¸ªemoji + 3ä¸ªé›¶å®½è¿æ¥ç¬¦ï¼‰

// æ›´å¥½çš„ emoji é•¿åº¦è®¡ç®—
const segmenter = new Intl.Segmenter("en", { granularity: "grapheme" });
const segments = [...segmenter.segment(text1)];
console.log(segments.length); // 1ï¼ˆç”¨æˆ·æ„ŸçŸ¥çš„å­—ç¬¦æ•°ï¼‰

// é—®é¢˜2ï¼šä»£ç†å¯¹ï¼ˆSurrogate Pairsï¼‰
const text2 = "ğ•³ğ–Šğ–‘ğ–‘ğ–”"; // æ•°å­¦ç²—ä½“å­—ç¬¦
console.log(text2.length); // 10ï¼ˆUTF-16 ç¼–ç å•å…ƒæ•°é‡ï¼‰
console.log([...text2].length); // 5ï¼ˆå®é™…å­—ç¬¦æ•°ï¼‰

// é—®é¢˜3ï¼šç»„åˆå­—ç¬¦ï¼ˆä¸åŒçš„ Unicode ç¼–ç å½¢å¼ï¼‰
const text3 = "Ã©"; // U+0065 (e) + U+0301 (ç»„åˆé‡éŸ³ç¬¦)
const text4 = "Ã©"; // U+00E9 (å•ä¸ªé¢„ç»„åˆå­—ç¬¦)
console.log(text3.length); // 2
console.log(text4.length); // 1
console.log(text3 === text4); // falseï¼ˆä¸åŒçš„ç¼–ç å½¢å¼ï¼‰
console.log(text3.normalize() === text4.normalize()); // trueï¼ˆæ ‡å‡†åŒ–åç›¸ç­‰ï¼‰

// è§£å†³æ–¹æ¡ˆï¼šæ–‡æœ¬è§„èŒƒåŒ–
const normalizeText = (text) => {
  return text.normalize("NFC"); // æ ‡å‡†åŒ–ä¸ºç»„åˆå½¢å¼
};
```

---

## ä¸‰ã€RTLï¼ˆRight-to-Leftï¼‰æ”¯æŒ

### 3.1 ä»€ä¹ˆæ˜¯ RTL

RTLï¼ˆä»å³åˆ°å·¦ï¼‰æ˜¯æŒ‡æ–‡æœ¬æ–¹å‘ä»å³å‘å·¦æ’åˆ—çš„ä¹¦å†™ç³»ç»Ÿï¼Œä¸»è¦ç”¨äºï¼š

- é˜¿æ‹‰ä¼¯è¯­ï¼ˆarï¼‰
- å¸Œä¼¯æ¥è¯­ï¼ˆheï¼‰
- æ³¢æ–¯è¯­ï¼ˆfaï¼‰
- ä¹Œå°”éƒ½è¯­ï¼ˆurï¼‰

### 3.2 React é¡¹ç›®ä¸­å®ç° RTL

#### æ–¹å¼ä¸€ï¼šä½¿ç”¨ CSS æ–¹å‘å±æ€§

```javascript
// src/components/RTLProvider.jsx
import React, { useEffect } from "react";
import { useTranslation } from "react-i18next";

const RTL_LANGUAGES = ["ar", "he", "fa", "ur"];

const RTLProvider = ({ children }) => {
  const { i18n } = useTranslation();
  const isRTL = RTL_LANGUAGES.includes(i18n.language);

  useEffect(() => {
    // è®¾ç½® HTML dir å±æ€§
    document.documentElement.dir = isRTL ? "rtl" : "ltr";

    // å¯é€‰ï¼šæ·»åŠ è¯­è¨€ç±»å
    document.documentElement.lang = i18n.language;

    // å¯é€‰ï¼šåŠ¨æ€åŠ è½½ RTL æ ·å¼
    if (isRTL) {
      import("./styles/rtl.css");
    }
  }, [isRTL, i18n.language]);

  return <div dir={isRTL ? "rtl" : "ltr"}>{children}</div>;
};

export default RTLProvider;
```

```css
/* src/styles/global.css - é’ˆå¯¹ RTL çš„ CSS è°ƒæ•´ */

/* æ–¹å¼1ï¼šä½¿ç”¨é€»è¾‘å±æ€§ï¼ˆæ¨èï¼‰ */
.container {
  margin-inline-start: 20px; /* è‡ªåŠ¨é€‚é… LTR/RTL */
  padding-inline-end: 10px;
  border-inline-start: 1px solid #ccc;
}

/* æ–¹å¼2ï¼šä½¿ç”¨ :dir() ä¼ªç±» */
.sidebar {
  left: 0;
}

:dir(rtl) .sidebar {
  left: auto;
  right: 0;
}

/* æ–¹å¼3ï¼šä½¿ç”¨å±æ€§é€‰æ‹©å™¨ */
[dir="rtl"] .icon {
  transform: scaleX(-1); /* é•œåƒç¿»è½¬å›¾æ ‡ */
}

/* å¸¸è§ RTL è°ƒæ•´ */
.flex-container {
  display: flex;
}

[dir="rtl"] .flex-container {
  flex-direction: row-reverse;
}

/* æ–‡æœ¬å¯¹é½ */
.text {
  text-align: start; /* è€Œä¸æ˜¯ left */
}

/* æµ®åŠ¨ */
.float-start {
  float: inline-start;
}
```

```css
/* src/styles/rtl.css - ä¸“é—¨çš„ RTL æ ·å¼ */
[dir="rtl"] {
  /* è¦†ç›–é»˜è®¤æ ·å¼ */
}

[dir="rtl"] .navbar {
  flex-direction: row-reverse;
}

[dir="rtl"] .breadcrumb::before {
  content: "â†";
}

[dir="ltr"] .breadcrumb::before {
  content: "â†’";
}
```

#### æ–¹å¼äºŒï¼šä½¿ç”¨ styled-components å¤„ç† RTL

```javascript
// src/utils/rtl.js
import { css } from "styled-components";

export const rtl = (ltrValue, rtlValue) => css`
  [dir="ltr"] & {
    ${ltrValue}
  }
  [dir="rtl"] & {
    ${rtlValue}
  }
`;

export const margin = (top, right, bottom, left) => css`
  [dir="ltr"] & {
    margin: ${top} ${right} ${bottom} ${left};
  }
  [dir="rtl"] & {
    margin: ${top} ${left} ${bottom} ${right};
  }
`;
```

```javascript
// ä½¿ç”¨ç¤ºä¾‹
import styled from "styled-components";
import { rtl, margin } from "./utils/rtl";

const Card = styled.div`
  ${margin("10px", "20px", "10px", "0")}

  ${rtl(
    css`
      text-align: left;
    `,
    css`
      text-align: right;
    `
  )}
`;
```

#### æ–¹å¼ä¸‰ï¼šä½¿ç”¨ Material-UI çš„ RTL æ”¯æŒ

```javascript
// src/App.jsx
import { createTheme, ThemeProvider } from "@mui/material/styles";
import { CacheProvider } from "@emotion/react";
import createCache from "@emotion/cache";
import { prefixer } from "stylis";
import rtlPlugin from "stylis-plugin-rtl";

const RTLApp = () => {
  const { i18n } = useTranslation();
  const isRTL = ["ar", "he", "fa"].includes(i18n.language);

  // åˆ›å»º RTL cache
  const cacheRtl = createCache({
    key: "muirtl",
    stylisPlugins: [prefixer, rtlPlugin],
  });

  const cacheLtr = createCache({
    key: "muiltr",
  });

  const theme = createTheme({
    direction: isRTL ? "rtl" : "ltr",
  });

  return (
    <CacheProvider value={isRTL ? cacheRtl : cacheLtr}>
      <ThemeProvider theme={theme}>
        <App />
      </ThemeProvider>
    </CacheProvider>
  );
};
```

### 3.3 RTL æœ€ä½³å®è·µ

```javascript
// 1. é¿å…ç¡¬ç¼–ç æ–¹å‘
// âŒ é”™è¯¯
<div style={{ marginLeft: '20px' }}>Text</div>

// âœ… æ­£ç¡®
<div style={{ marginInlineStart: '20px' }}>Text</div>

// 2. å›¾æ ‡å¤„ç†
const Icon = ({ name, shouldFlip = false }) => {
  const { i18n } = useTranslation();
  const isRTL = ['ar', 'he'].includes(i18n.language);

  return (
    <i
      className={name}
      style={{
        transform: isRTL && shouldFlip ? 'scaleX(-1)' : 'none'
      }}
    />
  );
};

// ä½¿ç”¨
<Icon name="arrow-right" shouldFlip={true} />

// 3. Flexbox å¸ƒå±€
const Container = styled.div`
  display: flex;
  justify-content: flex-start; /* è‡ªåŠ¨é€‚é… */
`;

// 4. æ•°å­—å’Œç‰¹æ®Šå­—ç¬¦å¤„ç†
const PhoneNumber = ({ number }) => {
  return (
    <span dir="ltr">{number}</span> // å¼ºåˆ¶ LTR æ˜¾ç¤ºç”µè¯å·ç 
  );
};
```

---

## å››ã€è¯­è¨€åˆ‡æ¢å®ç°

### 4.1 åŸºç¡€è¯­è¨€åˆ‡æ¢å™¨

```javascript
// src/components/LanguageSwitcher.jsx
import React from "react";
import { useTranslation } from "react-i18next";

const LanguageSwitcher = () => {
  const { i18n } = useTranslation();

  const languages = [
    { code: "en", name: "English", flag: "ğŸ‡ºğŸ‡¸" },
    { code: "zh", name: "ç®€ä½“ä¸­æ–‡", flag: "ğŸ‡¨ğŸ‡³" },
    { code: "ar", name: "Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©", flag: "ğŸ‡¸ğŸ‡¦" },
    { code: "es", name: "EspaÃ±ol", flag: "ğŸ‡ªğŸ‡¸" },
  ];

  const changeLanguage = (langCode) => {
    i18n.changeLanguage(langCode);
    // å¯é€‰ï¼šä¿å­˜åˆ° localStorageï¼ˆå¦‚æœæœªä½¿ç”¨ LanguageDetectorï¼‰
    localStorage.setItem("language", langCode);
  };

  return (
    <div className="language-switcher">
      <select
        value={i18n.language}
        onChange={(e) => changeLanguage(e.target.value)}
      >
        {languages.map((lang) => (
          <option key={lang.code} value={lang.code}>
            {lang.flag} {lang.name}
          </option>
        ))}
      </select>
    </div>
  );
};

export default LanguageSwitcher;
```

### 4.2 é«˜çº§è¯­è¨€åˆ‡æ¢ï¼ˆå¸¦ä¸‹æ‹‰èœå•å’ŒåŠ¨ç”»ï¼‰

```javascript
// src/components/AdvancedLanguageSwitcher.jsx
import React, { useState, useRef, useEffect } from "react";
import { useTranslation } from "react-i18next";
import "./LanguageSwitcher.css";

const AdvancedLanguageSwitcher = () => {
  const { i18n, t } = useTranslation();
  const [isOpen, setIsOpen] = useState(false);
  const dropdownRef = useRef(null);

  const languages = [
    { code: "en", name: "English", nativeName: "English", flag: "ğŸ‡ºğŸ‡¸" },
    { code: "zh", name: "Chinese", nativeName: "ç®€ä½“ä¸­æ–‡", flag: "ğŸ‡¨ğŸ‡³" },
    { code: "ar", name: "Arabic", nativeName: "Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©", flag: "ğŸ‡¸ğŸ‡¦" },
    { code: "ja", name: "Japanese", nativeName: "æ—¥æœ¬èª", flag: "ğŸ‡¯ğŸ‡µ" },
    { code: "fr", name: "French", nativeName: "FranÃ§ais", flag: "ğŸ‡«ğŸ‡·" },
  ];

  // å…³é—­ä¸‹æ‹‰èœå•ï¼ˆç‚¹å‡»å¤–éƒ¨ï¼‰
  useEffect(() => {
    const handleClickOutside = (event) => {
      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {
        setIsOpen(false);
      }
    };

    document.addEventListener("mousedown", handleClickOutside);
    return () => document.removeEventListener("mousedown", handleClickOutside);
  }, []);

  const currentLanguage =
    languages.find((lang) => lang.code === i18n.language) || languages[0];

  const handleLanguageChange = async (langCode) => {
    try {
      await i18n.changeLanguage(langCode);
      setIsOpen(false);

      // å¯é€‰ï¼šæ˜¾ç¤ºæˆåŠŸæç¤º
      // toast.success(t('language_changed'));

      // å¯é€‰ï¼šåˆ·æ–°é¡µé¢ï¼ˆå¦‚æœéœ€è¦ï¼‰
      // window.location.reload();
    } catch (error) {
      console.error("Language change failed:", error);
    }
  };

  return (
    <div className="language-switcher" ref={dropdownRef}>
      <button
        className="language-btn"
        onClick={() => setIsOpen(!isOpen)}
        aria-expanded={isOpen}
        aria-haspopup="true"
      >
        <span className="flag">{currentLanguage.flag}</span>
        <span className="lang-name">{currentLanguage.nativeName}</span>
        <svg
          className={`chevron ${isOpen ? "open" : ""}`}
          width="12"
          height="12"
          viewBox="0 0 12 12"
        >
          <path
            d="M2 4l4 4 4-4"
            stroke="currentColor"
            fill="none"
            strokeWidth="2"
          />
        </svg>
      </button>

      {isOpen && (
        <div className="language-dropdown">
          {languages.map((lang) => (
            <button
              key={lang.code}
              className={`language-option ${
                lang.code === i18n.language ? "active" : ""
              }`}
              onClick={() => handleLanguageChange(lang.code)}
            >
              <span className="flag">{lang.flag}</span>
              <div className="lang-info">
                <span className="native-name">{lang.nativeName}</span>
                <span className="english-name">{lang.name}</span>
              </div>
              {lang.code === i18n.language && (
                <svg
                  className="check-icon"
                  width="16"
                  height="16"
                  viewBox="0 0 16 16"
                >
                  <path
                    d="M13 4L6 11 3 8"
                    stroke="currentColor"
                    fill="none"
                    strokeWidth="2"
                  />
                </svg>
              )}
            </button>
          ))}
        </div>
      )}
    </div>
  );
};

export default AdvancedLanguageSwitcher;
```

```css
/* src/components/LanguageSwitcher.css */
.language-switcher {
  position: relative;
  display: inline-block;
}

.language-btn {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  background: #fff;
  border: 1px solid #e0e0e0;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s;
}

.language-btn:hover {
  background: #f5f5f5;
  border-color: #d0d0d0;
}

.flag {
  font-size: 20px;
  line-height: 1;
}

.lang-name {
  font-size: 14px;
  font-weight: 500;
}

.chevron {
  transition: transform 0.2s;
}

.chevron.open {
  transform: rotate(180deg);
}

.language-dropdown {
  position: absolute;
  top: calc(100% + 8px);
  right: 0;
  min-width: 220px;
  background: #fff;
  border: 1px solid #e0e0e0;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  padding: 8px;
  z-index: 1000;
  animation: slideDown 0.2s ease-out;
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.language-option {
  display: flex;
  align-items: center;
  gap: 12px;
  width: 100%;
  padding: 10px 12px;
  background: transparent;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  transition: background 0.2s;
}

.language-option:hover {
  background: #f5f5f5;
}

.language-option.active {
  background: #e3f2fd;
}

.lang-info {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  flex: 1;
}

.native-name {
  font-size: 14px;
  font-weight: 500;
  color: #333;
}

.english-name {
  font-size: 12px;
  color: #666;
}

.check-icon {
  color: #1976d2;
}

/* RTL æ”¯æŒ */
[dir="rtl"] .language-dropdown {
  right: auto;
  left: 0;
}

[dir="rtl"] .lang-info {
  align-items: flex-end;
}
```

### 4.3 è¯­è¨€åˆ‡æ¢çš„é«˜çº§åœºæ™¯

```javascript
// 1. è·¯ç”±é›†æˆï¼ˆReact Routerï¼‰
import { useNavigate, useParams } from 'react-router-dom';

const LanguageSwitcherWithRouter = () => {
  const { i18n } = useTranslation();
  const navigate = useNavigate();
  const { lang } = useParams();

  const changeLanguage = (newLang) => {
    i18n.changeLanguage(newLang);
    // æ›´æ–° URL è·¯å¾„ä¸­çš„è¯­è¨€
    const currentPath = window.location.pathname;
    const newPath = currentPath.replace(`/${lang}/`, `/${newLang}/`);
    navigate(newPath);
  };

  return (
    // ... è¯­è¨€åˆ‡æ¢ UI
  );
};

// 2. æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆNext.jsï¼‰
// pages/_app.js
import { appWithTranslation } from 'next-i18next';

function MyApp({ Component, pageProps }) {
  return <Component {...pageProps} />;
}

export default appWithTranslation(MyApp);

// 3. æŒä¹…åŒ–è¯­è¨€é€‰æ‹©
const saveLanguagePreference = (lang) => {
  // LocalStorage
  localStorage.setItem('preferred-language', lang);

  // Cookieï¼ˆç”¨äº SSRï¼‰
  document.cookie = `language=${lang}; path=/; max-age=31536000`;

  // å‘é€åˆ°æœåŠ¡å™¨
  fetch('/api/user/language', {
    method: 'POST',
    body: JSON.stringify({ language: lang })
  });
};

// 4. åŠ¨æ€åŠ è½½ç¿»è¯‘æ–‡ä»¶ï¼ˆä»£ç åˆ†å‰²ï¼‰
i18n.use(Backend).init({
  backend: {
    loadPath: '/locales/{{lng}}/{{ns}}.json',
    requestOptions: {
      cache: 'no-store'
    }
  }
});
```

---

## äº”ã€æ—¥æœŸå’Œè´§å¸æ ¼å¼åŒ–

### 5.1 ä½¿ç”¨ Intl API æ ¼å¼åŒ–

```javascript
// src/utils/formatters.js

/**
 * æ—¥æœŸæ ¼å¼åŒ–
 */
export const formatDate = (date, locale = "en-US", options = {}) => {
  const defaultOptions = {
    year: "numeric",
    month: "long",
    day: "numeric",
    ...options,
  };

  return new Intl.DateTimeFormat(locale, defaultOptions).format(new Date(date));
};

// ç¤ºä¾‹
formatDate(new Date(), "en-US"); // "December 5, 2025"
formatDate(new Date(), "zh-CN"); // "2025å¹´12æœˆ5æ—¥"
formatDate(new Date(), "ar-SA"); // "Ù¥ Ø¯ÙŠØ³Ù…Ø¨Ø± Ù¢Ù Ù¢Ù¥"

/**
 * æ—¶é—´æ ¼å¼åŒ–
 */
export const formatTime = (date, locale = "en-US", options = {}) => {
  const defaultOptions = {
    hour: "2-digit",
    minute: "2-digit",
    second: "2-digit",
    ...options,
  };

  return new Intl.DateTimeFormat(locale, defaultOptions).format(new Date(date));
};

/**
 * ç›¸å¯¹æ—¶é—´æ ¼å¼åŒ–ï¼ˆ"2å°æ—¶å‰"ï¼‰
 */
export const formatRelativeTime = (date, locale = "en-US") => {
  const rtf = new Intl.RelativeTimeFormat(locale, { numeric: "auto" });
  const now = new Date();
  const target = new Date(date);
  const diffInSeconds = (target - now) / 1000;

  const units = [
    { unit: "year", seconds: 31536000 },
    { unit: "month", seconds: 2592000 },
    { unit: "week", seconds: 604800 },
    { unit: "day", seconds: 86400 },
    { unit: "hour", seconds: 3600 },
    { unit: "minute", seconds: 60 },
    { unit: "second", seconds: 1 },
  ];

  for (const { unit, seconds } of units) {
    const value = Math.floor(Math.abs(diffInSeconds) / seconds);
    if (value >= 1) {
      return rtf.format(diffInSeconds > 0 ? value : -value, unit);
    }
  }

  return rtf.format(0, "second");
};

// ç¤ºä¾‹
formatRelativeTime(Date.now() - 3600000, "en"); // "1 hour ago"
formatRelativeTime(Date.now() - 3600000, "zh"); // "1å°æ—¶å‰"
formatRelativeTime(Date.now() - 3600000, "ar"); // "Ù‚Ø¨Ù„ Ø³Ø§Ø¹Ø© ÙˆØ§Ø­Ø¯Ø©"

/**
 * è´§å¸æ ¼å¼åŒ–
 */
export const formatCurrency = (amount, currency = "USD", locale = "en-US") => {
  return new Intl.NumberFormat(locale, {
    style: "currency",
    currency: currency,
    minimumFractionDigits: 2,
    maximumFractionDigits: 2,
  }).format(amount);
};

// ç¤ºä¾‹
formatCurrency(1234.56, "USD", "en-US"); // "$1,234.56"
formatCurrency(1234.56, "CNY", "zh-CN"); // "Â¥1,234.56"
formatCurrency(1234.56, "EUR", "de-DE"); // "1.234,56 â‚¬"
formatCurrency(1234.56, "SAR", "ar-SA"); // "Ù¡Ù¬Ù¢Ù£Ù¤Ù«Ù¥Ù¦ Ø±.Ø³.â€"

/**
 * æ•°å­—æ ¼å¼åŒ–
 */
export const formatNumber = (number, locale = "en-US", options = {}) => {
  return new Intl.NumberFormat(locale, options).format(number);
};

// ç¤ºä¾‹
formatNumber(1234567.89, "en-US"); // "1,234,567.89"
formatNumber(1234567.89, "de-DE"); // "1.234.567,89"
formatNumber(1234567.89, "ar-EG"); // "Ù¡Ù¬Ù¢Ù£Ù¤Ù¬Ù¥Ù¦Ù§Ù«Ù¨Ù©"

/**
 * ç™¾åˆ†æ¯”æ ¼å¼åŒ–
 */
export const formatPercent = (value, locale = "en-US", decimals = 2) => {
  return new Intl.NumberFormat(locale, {
    style: "percent",
    minimumFractionDigits: decimals,
    maximumFractionDigits: decimals,
  }).format(value);
};

// ç¤ºä¾‹
formatPercent(0.1234, "en-US"); // "12.34%"
formatPercent(0.1234, "fr-FR"); // "12,34 %"
```

### 5.2 åœ¨ React ç»„ä»¶ä¸­ä½¿ç”¨

```javascript
// src/components/FormattedDate.jsx
import React from 'react';
import { useTranslation } from 'react-i18next';
import { formatDate, formatRelativeTime } from '../utils/formatters';

const FormattedDate = ({ date, relative = false, format = 'long' }) => {
  const { i18n } = useTranslation();

  if (relative) {
    return <span>{formatRelativeTime(date, i18n.language)}</span>;
  }

  const options = {
    short: { month: 'short', day: 'numeric', year: 'numeric' },
    long: { month: 'long', day: 'numeric', year: 'numeric' },
    full: { weekday: 'long', month: 'long', day: 'numeric', year: 'numeric' }
  };

  return <span>{formatDate(date, i18n.language, options[format])}</span>;
};

export default FormattedDate;

// ä½¿ç”¨ç¤ºä¾‹
<FormattedDate date={new Date()} format="long" />
<FormattedDate date={Date.now() - 3600000} relative={true} />
```

```javascript
// src/components/FormattedCurrency.jsx
import React from 'react';
import { useTranslation } from 'react-i18next';
import { formatCurrency } from '../utils/formatters';

const FormattedCurrency = ({ amount, currency }) => {
  const { i18n } = useTranslation();

  // æ ¹æ®è¯­è¨€è‡ªåŠ¨é€‰æ‹©è´§å¸ï¼ˆå¯é€‰ï¼‰
  const currencyMap = {
    'en': 'USD',
    'zh': 'CNY',
    'ar': 'SAR',
    'ja': 'JPY',
    'de': 'EUR'
  };

  const finalCurrency = currency || currencyMap[i18n.language] || 'USD';

  return (
    <span className="formatted-currency">
      {formatCurrency(amount, finalCurrency, i18n.language)}
    </span>
  );
};

export default FormattedCurrency;

// ä½¿ç”¨ç¤ºä¾‹
<FormattedCurrency amount={1234.56} />
<FormattedCurrency amount={9999.99} currency="EUR" />
```

### 5.3 ä½¿ç”¨ react-intl è¿›è¡Œæ ¼å¼åŒ–

```javascript
// å®‰è£…
// npm install react-intl

// src/App.jsx
import { IntlProvider } from "react-intl";
import { useTranslation } from "react-i18next";

const App = () => {
  const { i18n } = useTranslation();

  return (
    <IntlProvider locale={i18n.language} defaultLocale="en">
      {/* ä½ çš„åº”ç”¨ */}
    </IntlProvider>
  );
};

// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨
import {
  FormattedDate,
  FormattedTime,
  FormattedNumber,
  FormattedMessage,
} from "react-intl";

const Example = () => {
  return (
    <div>
      {/* æ—¥æœŸ */}
      <FormattedDate
        value={new Date()}
        year="numeric"
        month="long"
        day="numeric"
      />

      {/* æ—¶é—´ */}
      <FormattedTime value={new Date()} />

      {/* è´§å¸ */}
      <FormattedNumber value={1234.56} style="currency" currency="USD" />

      {/* ç™¾åˆ†æ¯” */}
      <FormattedNumber
        value={0.1234}
        style="percent"
        minimumFractionDigits={2}
      />

      {/* ç›¸å¯¹æ—¶é—´ */}
      <FormattedRelativeTime
        value={-1}
        unit="hour"
        updateIntervalInSeconds={1}
      />
    </div>
  );
};
```

### 5.4 é«˜çº§æ ¼å¼åŒ–åœºæ™¯

```javascript
// 1. æ—¶åŒºå¤„ç†
export const formatDateWithTimezone = (date, timezone, locale = "en-US") => {
  return new Intl.DateTimeFormat(locale, {
    timeZone: timezone,
    year: "numeric",
    month: "long",
    day: "numeric",
    hour: "2-digit",
    minute: "2-digit",
    timeZoneName: "short",
  }).format(new Date(date));
};

formatDateWithTimezone(new Date(), "America/New_York", "en-US");
// "December 5, 2025, 06:51 AM EST"

// 2. æ•°å­—å•ä½æ ¼å¼åŒ–
export const formatUnit = (value, unit, locale = "en-US") => {
  return new Intl.NumberFormat(locale, {
    style: "unit",
    unit: unit,
    unitDisplay: "long",
  }).format(value);
};

formatUnit(100, "kilometer", "en-US"); // "100 kilometers"
formatUnit(100, "kilometer", "zh-CN"); // "100å…¬é‡Œ"

// 3. åˆ—è¡¨æ ¼å¼åŒ–
export const formatList = (items, locale = "en-US", type = "conjunction") => {
  return new Intl.ListFormat(locale, {
    style: "long",
    type: type, // 'conjunction', 'disjunction', 'unit'
  }).format(items);
};

formatList(["Apple", "Banana", "Orange"], "en-US");
// "Apple, Banana, and Orange"
formatList(["è‹¹æœ", "é¦™è•‰", "æ©™å­"], "zh-CN");
// "è‹¹æœã€é¦™è•‰å’Œæ©™å­"

// 4. å¤æ•°è§„åˆ™
import { useTranslation } from "react-i18next";

const PluralExample = ({ count }) => {
  const { t } = useTranslation();

  // åœ¨ç¿»è¯‘æ–‡ä»¶ä¸­å®šä¹‰
  // "items": "{{count}} item",
  // "items_plural": "{{count}} items"

  return <span>{t("items", { count })}</span>;
};
```

---

## å…­ã€å®Œæ•´ç¤ºä¾‹é¡¹ç›®

### 6.1 ç¿»è¯‘æ–‡ä»¶ç»“æ„

```
src/
  i18n/
    locales/
      en/
        translation.json
        common.json
        errors.json
      zh/
        translation.json
        common.json
        errors.json
      ar/
        translation.json
        common.json
        errors.json
    config.js
```

```json
// src/i18n/locales/en/translation.json
{
  "welcome": "Welcome to our application",
  "user": {
    "profile": "User Profile",
    "settings": "Settings",
    "logout": "Logout"
  },
  "product": {
    "price": "Price: {{price}}",
    "inStock": "In Stock",
    "outOfStock": "Out of Stock",
    "addToCart": "Add to Cart"
  },
  "form": {
    "submit": "Submit",
    "cancel": "Cancel",
    "required": "This field is required",
    "email": "Email address",
    "password": "Password"
  },
  "error": {
    "network": "Network error occurred",
    "notFound": "Page not found",
    "unauthorized": "Unauthorized access"
  }
}
```

```json
// src/i18n/locales/zh/translation.json
{
  "welcome": "æ¬¢è¿ä½¿ç”¨æˆ‘ä»¬çš„åº”ç”¨",
  "user": {
    "profile": "ç”¨æˆ·èµ„æ–™",
    "settings": "è®¾ç½®",
    "logout": "é€€å‡ºç™»å½•"
  },
  "product": {
    "price": "ä»·æ ¼ï¼š{{price}}",
    "inStock": "æœ‰è´§",
    "outOfStock": "ç¼ºè´§",
    "addToCart": "åŠ å…¥è´­ç‰©è½¦"
  },
  "form": {
    "submit": "æäº¤",
    "cancel": "å–æ¶ˆ",
    "required": "æ­¤å­—æ®µä¸ºå¿…å¡«é¡¹",
    "email": "ç”µå­é‚®ä»¶åœ°å€",
    "password": "å¯†ç "
  },
  "error": {
    "network": "ç½‘ç»œé”™è¯¯",
    "notFound": "é¡µé¢æœªæ‰¾åˆ°",
    "unauthorized": "æœªæˆæƒè®¿é—®"
  }
}
```

```json
// src/i18n/locales/ar/translation.json
{
  "welcome": "Ù…Ø±Ø­Ø¨Ø§ Ø¨Ùƒ ÙÙŠ ØªØ·Ø¨ÙŠÙ‚Ù†Ø§",
  "user": {
    "profile": "Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ",
    "settings": "Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª",
    "logout": "ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬"
  },
  "product": {
    "price": "Ø§Ù„Ø³Ø¹Ø±: {{price}}",
    "inStock": "Ù…ØªÙˆÙØ±",
    "outOfStock": "Ù†ÙØ° Ù…Ù† Ø§Ù„Ù…Ø®Ø²ÙˆÙ†",
    "addToCart": "Ø£Ø¶Ù Ø¥Ù„Ù‰ Ø§Ù„Ø³Ù„Ø©"
  },
  "form": {
    "submit": "Ø¥Ø±Ø³Ø§Ù„",
    "cancel": "Ø¥Ù„ØºØ§Ø¡",
    "required": "Ù‡Ø°Ø§ Ø§Ù„Ø­Ù‚Ù„ Ù…Ø·Ù„ÙˆØ¨",
    "email": "Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",
    "password": "ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±"
  },
  "error": {
    "network": "Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø´Ø¨ÙƒØ©",
    "notFound": "Ø§Ù„ØµÙØ­Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©",
    "unauthorized": "ÙˆØµÙˆÙ„ ØºÙŠØ± Ù…ØµØ±Ø­ Ø¨Ù‡"
  }
}
```

### 6.2 å®é™…åº”ç”¨ç¤ºä¾‹

```javascript
// src/App.jsx
import React from "react";
import { useTranslation } from "react-i18next";
import RTLProvider from "./components/RTLProvider";
import LanguageSwitcher from "./components/LanguageSwitcher";
import ProductCard from "./components/ProductCard";
import "./App.css";

const App = () => {
  const { t } = useTranslation();

  return (
    <RTLProvider>
      <div className="app">
        <header className="app-header">
          <h1>{t("welcome")}</h1>
          <LanguageSwitcher />
        </header>

        <main className="app-main">
          <ProductCard
            name="MacBook Pro"
            price={1999.99}
            currency="USD"
            inStock={true}
            releaseDate={new Date("2025-11-01")}
          />
        </main>
      </div>
    </RTLProvider>
  );
};

export default App;
```

```javascript
// src/components/ProductCard.jsx
import React from "react";
import { useTranslation } from "react-i18next";
import { formatCurrency, formatDate } from "../utils/formatters";
import "./ProductCard.css";

const ProductCard = ({ name, price, currency, inStock, releaseDate }) => {
  const { t, i18n } = useTranslation();

  return (
    <div className="product-card">
      <h3>{name}</h3>

      <p className="price">
        {t("product.price", {
          price: formatCurrency(price, currency, i18n.language),
        })}
      </p>

      <p className="stock-status">
        {inStock ? t("product.inStock") : t("product.outOfStock")}
      </p>

      <p className="release-date">
        {formatDate(releaseDate, i18n.language, {
          month: "long",
          day: "numeric",
          year: "numeric",
        })}
      </p>

      <button className="add-to-cart-btn">{t("product.addToCart")}</button>
    </div>
  );
};

export default ProductCard;
```

---

## ä¸ƒã€æœ€ä½³å®è·µä¸æ€§èƒ½ä¼˜åŒ–

### 7.1 æœ€ä½³å®è·µ

1. **ç¿»è¯‘æ–‡ä»¶ç»„ç»‡**

   - ä½¿ç”¨å‘½åç©ºé—´åˆ†ç¦»ä¸åŒæ¨¡å—çš„ç¿»è¯‘
   - ä¿æŒç¿»è¯‘é”®çš„è¯­ä¹‰åŒ–
   - é¿å…æ·±å±‚åµŒå¥—ï¼ˆæœ€å¤š 3 å±‚ï¼‰

2. **ç¿»è¯‘é”®å‘½åè§„èŒƒ**

   ```javascript
   // âœ… å¥½çš„å‘½å
   t("user.profile.edit.title");
   t("error.validation.email.invalid");
   t("button.submit");

   // âŒ ä¸å¥½çš„å‘½å
   t("title1");
   t("err1");
   t("btn");
   ```

3. **æ’å€¼å’Œå ä½ç¬¦**

   ```javascript
   // ä½¿ç”¨å‘½åå ä½ç¬¦
   t("welcome.message", { username: "John" });
   // "Welcome, John!"

   // ä½¿ç”¨å¤æ•°è§„åˆ™
   t("items.count", { count: 5 });
   // "5 items"
   ```

4. **å¤„ç†ç¼ºå¤±ç¿»è¯‘**
   ```javascript
   // i18n é…ç½®
   i18n.init({
     saveMissing: true, // å¼€å‘ç¯å¢ƒå¯ç”¨
     missingKeyHandler: (lngs, ns, key) => {
       console.warn(`Missing translation: ${key}`);
       // å¯é€‰ï¼šå‘é€åˆ°æ—¥å¿—æœåŠ¡
     },
     fallbackLng: "en",
     returnEmptyString: false,
     returnNull: false,
   });
   ```

### 7.2 æ€§èƒ½ä¼˜åŒ–

```javascript
// 1. ä»£ç åˆ†å‰² - æŒ‰éœ€åŠ è½½ç¿»è¯‘æ–‡ä»¶
i18n.use(Backend).init({
  backend: {
    loadPath: '/locales/{{lng}}/{{ns}}.json',
  },
  react: {
    useSuspense: true, // ä½¿ç”¨ Suspense
  }
});

// 2. ç¼“å­˜ç¿»è¯‘
const translationCache = new Map();

export const getCachedTranslation = (key, options) => {
  const cacheKey = `${key}-${JSON.stringify(options)}`;
  if (translationCache.has(cacheKey)) {
    return translationCache.get(cacheKey);
  }
  const result = i18n.t(key, options);
  translationCache.set(cacheKey, result);
  return result;
};

// 3. é¢„åŠ è½½å…³é”®è¯­è¨€
useEffect(() => {
  const preloadLanguages = ['en', 'zh'];
  preloadLanguages.forEach(lang => {
    i18n.loadLanguages(lang);
  });
}, []);

// 4. ä½¿ç”¨ Trans ç»„ä»¶è€Œéå­—ç¬¦ä¸²æ‹¼æ¥
import { Trans } from 'react-i18next';

// âŒ ä¸æ¨è
<p>{t('welcome.part1')} <strong>{username}</strong> {t('welcome.part2')}</p>

// âœ… æ¨è
<Trans
  i18nKey="welcome.full"
  values={{ username }}
  components={{ strong: <strong /> }}
/>
// translation: "Welcome <strong>{{username}}</strong> to our app!"
```

### 7.3 æµ‹è¯•

```javascript
// æµ‹è¯•å›½é™…åŒ–ç»„ä»¶
import { render, screen } from "@testing-library/react";
import { I18nextProvider } from "react-i18next";
import i18n from "../i18n/config";

describe("ProductCard", () => {
  it("renders in English", () => {
    i18n.changeLanguage("en");
    render(
      <I18nextProvider i18n={i18n}>
        <ProductCard name="Test" price={100} currency="USD" inStock={true} />
      </I18nextProvider>
    );
    expect(screen.getByText(/in stock/i)).toBeInTheDocument();
  });

  it("renders in Chinese", () => {
    i18n.changeLanguage("zh");
    render(
      <I18nextProvider i18n={i18n}>
        <ProductCard name="æµ‹è¯•" price={100} currency="CNY" inStock={true} />
      </I18nextProvider>
    );
    expect(screen.getByText(/æœ‰è´§/)).toBeInTheDocument();
  });
});
```

---

## å…«ã€å¸¸è§é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

### 8.1 SEO é—®é¢˜

```javascript
// ä½¿ç”¨ React Helmet å¤„ç†å¤šè¯­è¨€ meta æ ‡ç­¾
import { Helmet } from "react-helmet";
import { useTranslation } from "react-i18next";

const SEOComponent = () => {
  const { i18n, t } = useTranslation();

  return (
    <Helmet>
      <html
        lang={i18n.language}
        dir={["ar", "he"].includes(i18n.language) ? "rtl" : "ltr"}
      />
      <title>{t("meta.title")}</title>
      <meta name="description" content={t("meta.description")} />

      {/* å¤šè¯­è¨€é“¾æ¥ */}
      <link rel="alternate" hrefLang="en" href="https://example.com/en" />
      <link rel="alternate" hrefLang="zh" href="https://example.com/zh" />
      <link rel="alternate" hrefLang="ar" href="https://example.com/ar" />
    </Helmet>
  );
};
```

### 8.2 æœåŠ¡ç«¯æ¸²æŸ“ï¼ˆSSRï¼‰

```javascript
// Next.js ç¤ºä¾‹
// next.config.js
const { i18n } = require("./next-i18next.config");

module.exports = {
  i18n,
};

// next-i18next.config.js
module.exports = {
  i18n: {
    defaultLocale: "en",
    locales: ["en", "zh", "ar"],
    localeDetection: true,
  },
};

// pages/index.jsx
import { serverSideTranslations } from "next-i18next/serverSideTranslations";
import { useTranslation } from "next-i18next";

export default function Home() {
  const { t } = useTranslation("common");
  return <h1>{t("welcome")}</h1>;
}

export async function getStaticProps({ locale }) {
  return {
    props: {
      ...(await serverSideTranslations(locale, ["common"])),
    },
  };
}
```

### 8.3 æ€§èƒ½ç›‘æ§

```javascript
// ç›‘æ§ç¿»è¯‘åŠ è½½æ—¶é—´
i18n.on("loaded", (loaded) => {
  console.log("Translations loaded:", loaded);
});

i18n.on("languageChanged", (lng) => {
  console.log("Language changed to:", lng);
  // å‘é€åˆ†æäº‹ä»¶
  analytics.track("Language Changed", { language: lng });
});
```

---

## ä¹ã€å·¥å…·ä¸èµ„æº

### 9.1 æ¨èå·¥å…·

- **i18n Ally (VS Code æ‰©å±•)**ï¼šå¯è§†åŒ–ç®¡ç†ç¿»è¯‘æ–‡ä»¶
- **BabelEdit**ï¼šä¸“ä¸šçš„ç¿»è¯‘ç¼–è¾‘å™¨
- **Crowdin / Lokalise**ï¼šå›¢é˜Ÿåä½œç¿»è¯‘å¹³å°
- **Google Translate API**ï¼šè‡ªåŠ¨ç¿»è¯‘è¾…åŠ©

### 9.2 è°ƒè¯•æŠ€å·§

```javascript
// å¼€å¯è°ƒè¯•æ¨¡å¼
i18n.init({
  debug: true, // æ§åˆ¶å°è¾“å‡ºè¯¦ç»†æ—¥å¿—
  saveMissing: true, // è®°å½•ç¼ºå¤±çš„ç¿»è¯‘é”®
});

// è‡ªå®šä¹‰è°ƒè¯•ç»„ä»¶
const I18nDebugger = () => {
  const { i18n } = useTranslation();

  if (process.env.NODE_ENV !== "development") return null;

  return (
    <div
      style={{
        position: "fixed",
        bottom: 0,
        right: 0,
        background: "#000",
        color: "#fff",
        padding: "10px",
      }}
    >
      <p>Current Language: {i18n.language}</p>
      <p>Direction: {document.dir}</p>
      <button onClick={() => i18n.changeLanguage("en")}>EN</button>
      <button onClick={() => i18n.changeLanguage("zh")}>ZH</button>
      <button onClick={() => i18n.changeLanguage("ar")}>AR</button>
    </div>
  );
};
```

---

## åã€æ€»ç»“

å®ç°å®Œæ•´çš„å›½é™…åŒ–åŠŸèƒ½éœ€è¦å…³æ³¨ï¼š

1. **æ¶æ„è®¾è®¡**ï¼šé€‰æ‹©åˆé€‚çš„ i18n åº“å’Œæ¶æ„
2. **Unicode æ”¯æŒ**ï¼šæ­£ç¡®å¤„ç†å¤šè¯­è¨€å­—ç¬¦å’Œ emoji
3. **RTL å¸ƒå±€**ï¼šæ”¯æŒä»å³åˆ°å·¦çš„è¯­è¨€
4. **è¯­è¨€åˆ‡æ¢**ï¼šæä¾›å‹å¥½çš„åˆ‡æ¢ç•Œé¢å’ŒæŒä¹…åŒ–
5. **æ ¼å¼åŒ–**ï¼šä½¿ç”¨ Intl API å¤„ç†æ—¥æœŸã€è´§å¸ã€æ•°å­—
6. **æ€§èƒ½ä¼˜åŒ–**ï¼šä»£ç åˆ†å‰²ã€ç¼“å­˜ã€é¢„åŠ è½½
7. **SEO ä¼˜åŒ–**ï¼šå¤šè¯­è¨€ meta æ ‡ç­¾å’Œ sitemap
8. **æµ‹è¯•**ï¼šç¡®ä¿å„è¯­è¨€ç‰ˆæœ¬æ­£å¸¸å·¥ä½œ

é€šè¿‡ä»¥ä¸Šå®Œæ•´çš„å®ç°æ–¹æ¡ˆï¼Œå¯ä»¥æ„å»ºä¸€ä¸ªä¸“ä¸šçš„ã€æ”¯æŒå¤šè¯­è¨€çš„ React åº”ç”¨ã€‚
