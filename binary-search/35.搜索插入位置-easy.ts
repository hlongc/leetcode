/*
 * @lc app=leetcode.cn id=35 lang=typescript
 *
 * [35] æœç´¢æ’å…¥ä½ç½®
 *
 * https://leetcode.cn/problems/search-insert-position/description/
 *
 * algorithms
 * Easy (47.88%)
 * Likes:    2481
 * Dislikes: 0
 * Total Accepted:    1.7M
 * Total Submissions: 3.6M
 * Testcase Example:  '[1,3,5,6]\n5'
 *
 * ç»™å®šä¸€ä¸ªæ’åºæ•°ç»„å’Œä¸€ä¸ªç›®æ ‡å€¼ï¼Œåœ¨æ•°ç»„ä¸­æ‰¾åˆ°ç›®æ ‡å€¼ï¼Œå¹¶è¿”å›å…¶ç´¢å¼•ã€‚å¦‚æœç›®æ ‡å€¼ä¸å­˜åœ¨äºæ•°ç»„ä¸­ï¼Œè¿”å›å®ƒå°†ä¼šè¢«æŒ‰é¡ºåºæ’å…¥çš„ä½ç½®ã€‚
 *
 * è¯·å¿…é¡»ä½¿ç”¨æ—¶é—´å¤æ‚åº¦ä¸º O(log n) çš„ç®—æ³•ã€‚
 *
 *
 *
 * ç¤ºä¾‹ 1:
 *
 *
 * è¾“å…¥: nums = [1,3,5,6], target = 5
 * è¾“å‡º: 2
 *
 *
 * ç¤ºä¾‹Â 2:
 *
 *
 * è¾“å…¥: nums = [1,3,5,6], target = 2
 * è¾“å‡º: 1
 *
 *
 * ç¤ºä¾‹ 3:
 *
 *
 * è¾“å…¥: nums = [1,3,5,6], target = 7
 * è¾“å‡º: 4
 *
 *
 *
 *
 * æç¤º:
 *
 *
 * 1 <= nums.length <= 10^4
 * -10^4 <= nums[i] <= 10^4
 * nums ä¸ºÂ æ— é‡å¤å…ƒç´ Â çš„Â å‡åºÂ æ’åˆ—æ•°ç»„
 * -10^4 <= target <= 10^4
 *
 *
 */

// @lc code=start
/**
 * åœ¨æ’åºæ•°ç»„ä¸­æœç´¢ç›®æ ‡å€¼çš„æ’å…¥ä½ç½®
 *
 * è§£é¢˜æ€è·¯ï¼š
 * 1. ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾ç®—æ³•ï¼Œæ—¶é—´å¤æ‚åº¦ O(log n)
 * 2. å¦‚æœæ‰¾åˆ°ç›®æ ‡å€¼ï¼Œè¿”å›å…¶ç´¢å¼•
 * 3. å¦‚æœæ²¡æ‰¾åˆ°ï¼Œè¿”å›åº”è¯¥æ’å…¥çš„ä½ç½®ï¼ˆä¿æŒæ•°ç»„æœ‰åºï¼‰
 *
 * å…³é”®ç‚¹ï¼š
 * - ä½¿ç”¨å·¦é—­å³é—­åŒºé—´ [left, right] è¿›è¡Œæœç´¢
 * - å½“ nums[mid] >= target æ—¶ï¼Œç­”æ¡ˆå¯èƒ½åœ¨ mid ä½ç½®æˆ–å…¶å·¦ä¾§
 * - å½“ nums[mid] < target æ—¶ï¼Œç­”æ¡ˆä¸€å®šåœ¨ mid å³ä¾§
 */
function searchInsert(nums: number[], target: number): number {
  let left = 0; // æœç´¢åŒºé—´çš„å·¦è¾¹ç•Œ
  let right = nums.length - 1; // æœç´¢åŒºé—´çš„å³è¾¹ç•Œ

  // è¾¹ç•Œæƒ…å†µä¼˜åŒ–ï¼šç›®æ ‡å€¼å°äºæœ€å°å…ƒç´ ï¼Œæ’å…¥åˆ°å¼€å¤´
  if (target <= nums[left]) return 0;

  // è¾¹ç•Œæƒ…å†µä¼˜åŒ–ï¼šç›®æ ‡å€¼å¤§äºæœ€å¤§å…ƒç´ ï¼Œæ’å…¥åˆ°æœ«å°¾
  if (target > nums[right]) return nums.length;

  // äºŒåˆ†æŸ¥æ‰¾ä¸»å¾ªç¯
  while (left <= right) {
    // è®¡ç®—ä¸­ç‚¹ï¼Œä½¿ç”¨ä½è¿ç®—é¿å…æº¢å‡º
    const mid = left + ((right - left) >> 1);

    if (nums[mid] === target) {
      // æ‰¾åˆ°ç›®æ ‡å€¼ï¼Œç›´æ¥è¿”å›ç´¢å¼•
      return mid;
    } else if (nums[mid] > target) {
      // ğŸ”‘ å…³é”®ç†è§£ï¼šnums[mid] > target æ—¶ä¸ºä»€ä¹ˆ right = mid - 1ï¼Ÿ
      //
      // è™½ç„¶ mid ä½ç½®å¯èƒ½æ˜¯æ’å…¥ä½ç½®ï¼Œä½†æˆ‘ä»¬å·²ç»æ£€æŸ¥è¿‡ nums[mid] äº†ï¼
      //
      // åˆ†æï¼š
      // 1. æˆ‘ä»¬çŸ¥é“ nums[mid] > target
      // 2. mid å¯èƒ½æ˜¯æ’å…¥ä½ç½®ï¼ˆå¦‚æœå·¦ä¾§æ²¡æœ‰æ›´åˆé€‚çš„ä½ç½®ï¼‰
      // 3. ä½†æˆ‘ä»¬éœ€è¦æ£€æŸ¥ [left, mid-1] åŒºé—´æ˜¯å¦æœ‰æ›´åˆé€‚çš„ä½ç½®
      // 4. å¦‚æœ [left, mid-1] ä¸­æ²¡æœ‰æ‰¾åˆ°ï¼Œæœ€ç»ˆ left ä¼šæ”¶æ•›åˆ° mid
      //
      // ä¾‹å­ï¼šnums=[1,3,5,6], target=4
      // - åˆå§‹ï¼šleft=0, right=3
      // - mid=1, nums[1]=3 < 4, left=2
      // - mid=2, nums[2]=5 > 4, right=1 (è®¾ç½®ä¸º mid-1)
      // - left=2 > right=1ï¼Œå¾ªç¯ç»“æŸï¼Œè¿”å› left=2
      // - ç»“æœï¼šåœ¨ç´¢å¼•2å¤„æ’å…¥4ï¼Œæ•°ç»„å˜ä¸º[1,3,4,5,6] âœ“
      right = mid - 1;
    } else {
      // ä¸­ç‚¹å€¼å°äºç›®æ ‡å€¼ï¼Œç›®æ ‡å€¼åœ¨å³åŠéƒ¨åˆ†
      // mid ä½ç½®ä¸å¯èƒ½æ˜¯æ’å…¥ä½ç½®ï¼Œæ‰€ä»¥æœç´¢ [mid+1, right]
      left = mid + 1;
    }
  }

  // å¾ªç¯ç»“æŸæ—¶ï¼Œleft å°±æ˜¯æ’å…¥ä½ç½®
  // æ­¤æ—¶ left > rightï¼Œleft æŒ‡å‘ç¬¬ä¸€ä¸ªå¤§äº target çš„ä½ç½®
  return left;
}

/**
 * æµ‹è¯•ç”¨ä¾‹éªŒè¯ï¼š
 *
 * ç¤ºä¾‹ 1: nums = [1,3,5,6], target = 5
 * - åˆå§‹ï¼šleft=0, right=3
 * - mid=1, nums[1]=3 < 5, left=2
 * - mid=2, nums[2]=5 = 5, è¿”å› 2 âœ“
 *
 * ç¤ºä¾‹ 2: nums = [1,3,5,6], target = 2
 * - åˆå§‹ï¼šleft=0, right=3
 * - mid=1, nums[1]=3 > 2, right=0
 * - mid=0, nums[0]=1 < 2, left=1
 * - left > rightï¼Œè¿”å› left=1 âœ“
 *
 * ç¤ºä¾‹ 3: nums = [1,3,5,6], target = 7
 * - ç›®æ ‡å€¼ > nums[3]=6ï¼Œç›´æ¥è¿”å› 4 âœ“
 *
 * ç¤ºä¾‹ 4: nums = [1,3,5,6], target = 0
 * - ç›®æ ‡å€¼ <= nums[0]=1ï¼Œç›´æ¥è¿”å› 0 âœ“
 *
 *
 * ğŸ¤” å¸¸è§ç–‘é—®è§£ç­”ï¼šä¸ºä»€ä¹ˆ right = mid - 1 è€Œä¸æ˜¯ right = midï¼Ÿ
 *
 * é—®é¢˜ï¼šå½“ nums[mid] > target æ—¶ï¼Œmid ä½ç½®å¯èƒ½æ˜¯æ’å…¥ä½ç½®ï¼Œ
 *       ä¸ºä»€ä¹ˆä¸ä¿ç•™ mid åœ¨æœç´¢èŒƒå›´å†…ï¼Ÿ
 *
 * ç­”æ¡ˆï¼šå…³é”®åœ¨äºç†è§£äºŒåˆ†æŸ¥æ‰¾çš„"å·²æ£€æŸ¥"æ¦‚å¿µï¼š
 *
 * 1. ğŸ“ æˆ‘ä»¬å·²ç»æ£€æŸ¥äº† nums[mid]ï¼ŒçŸ¥é“å®ƒ > target
 * 2. ğŸ¯ æˆ‘ä»¬çš„ç›®æ ‡æ˜¯æ‰¾åˆ°"ç¬¬ä¸€ä¸ª >= target çš„ä½ç½®"
 * 3. ğŸ” è™½ç„¶ mid å¯èƒ½æ˜¯ç­”æ¡ˆï¼Œä½†æˆ‘ä»¬éœ€è¦ç¡®è®¤å·¦ä¾§æ˜¯å¦æœ‰æ›´å°çš„ç­”æ¡ˆ
 * 4. âš¡ ç”±äºå·²ç»æ£€æŸ¥è¿‡ midï¼Œä¸‹æ¬¡æœç´¢èŒƒå›´å¯ä»¥æ˜¯ [left, mid-1]
 * 5. ğŸª å¦‚æœå·¦ä¾§æ²¡æœ‰æ›´åˆé€‚çš„ä½ç½®ï¼Œleft æœ€ç»ˆä¼šæ”¶æ•›åˆ° mid çš„å€¼
 *
 * è¯¦ç»†è¿‡ç¨‹æ¼”ç¤ºï¼šnums = [1,3,5,6], target = 4
 *
 * ç¬¬1è½®ï¼šleft=0, right=3, mid=1
 * - nums[1]=3 < 4ï¼Œç­”æ¡ˆåœ¨å³ä¾§ï¼Œleft=2
 *
 * ç¬¬2è½®ï¼šleft=2, right=3, mid=2
 * - nums[2]=5 > 4ï¼Œmid(ç´¢å¼•2)å¯èƒ½æ˜¯ç­”æ¡ˆ
 * - ä½†éœ€è¦æ£€æŸ¥å·¦ä¾§æ˜¯å¦æœ‰æ›´åˆé€‚çš„ä½ç½®
 * - è®¾ç½® right=1 (mid-1)ï¼Œæœç´¢èŒƒå›´å˜ä¸º [2,1]
 *
 * ç¬¬3è½®ï¼šleft=2 > right=1ï¼Œå¾ªç¯ç»“æŸ
 * - è¿”å› left=2ï¼Œè¿™æ­£å¥½æ˜¯åŸæ¥çš„ mid å€¼ï¼
 *
 * ç»“è®ºï¼šé€šè¿‡ right=mid-1ï¼Œæˆ‘ä»¬ç¡®ä¿äº†ï¼š
 * âœ… ä¸ä¼šé—æ¼ä»»ä½•å¯èƒ½çš„æ’å…¥ä½ç½®
 * âœ… æœ€ç»ˆ left ä¼šæŒ‡å‘æ­£ç¡®çš„æ’å…¥ä½ç½®
 * âœ… ç®—æ³•çš„æ­£ç¡®æ€§å¾—åˆ°ä¿è¯
 */
// @lc code=end
