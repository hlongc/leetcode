/*
 * @lc app=leetcode.cn id=15 lang=typescript
 *
 * [15] ä¸‰æ•°ä¹‹å’Œ
 *
 * https://leetcode.cn/problems/3sum/description/
 *
 * algorithms
 * Medium (39.29%)
 * Likes:    7665
 * Dislikes: 0
 * Total Accepted:    2.5M
 * Total Submissions: 6.4M
 * Testcase Example:  '[-1,0,1,2,-1,-4]'
 *
 * ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨ä¸‰å…ƒç»„ [nums[i], nums[j], nums[k]] æ»¡è¶³ i != jã€i != k ä¸” j !=
 * k ï¼ŒåŒæ—¶è¿˜æ»¡è¶³ nums[i] + nums[j] + nums[k] == 0 ã€‚è¯·ä½ è¿”å›æ‰€æœ‰å’Œä¸º 0 ä¸”ä¸é‡å¤çš„ä¸‰å…ƒç»„ã€‚
 *
 * æ³¨æ„ï¼šç­”æ¡ˆä¸­ä¸å¯ä»¥åŒ…å«é‡å¤çš„ä¸‰å…ƒç»„ã€‚
 *
 *
 *
 *
 *
 * ç¤ºä¾‹ 1ï¼š
 *
 *
 * è¾“å…¥ï¼šnums = [-1,0,1,2,-1,-4]
 * è¾“å‡ºï¼š[[-1,-1,2],[-1,0,1]]
 * è§£é‡Šï¼š
 * nums[0] + nums[1] + nums[2] = (-1) + 0 + 1 = 0 ã€‚
 * nums[1] + nums[2] + nums[4] = 0 + 1 + (-1) = 0 ã€‚
 * nums[0] + nums[3] + nums[4] = (-1) + 2 + (-1) = 0 ã€‚
 * ä¸åŒçš„ä¸‰å…ƒç»„æ˜¯ [-1,0,1] å’Œ [-1,-1,2] ã€‚
 * æ³¨æ„ï¼Œè¾“å‡ºçš„é¡ºåºå’Œä¸‰å…ƒç»„çš„é¡ºåºå¹¶ä¸é‡è¦ã€‚
 *
 *
 * ç¤ºä¾‹ 2ï¼š
 *
 *
 * è¾“å…¥ï¼šnums = [0,1,1]
 * è¾“å‡ºï¼š[]
 * è§£é‡Šï¼šå”¯ä¸€å¯èƒ½çš„ä¸‰å…ƒç»„å’Œä¸ä¸º 0 ã€‚
 *
 *
 * ç¤ºä¾‹ 3ï¼š
 *
 *
 * è¾“å…¥ï¼šnums = [0,0,0]
 * è¾“å‡ºï¼š[[0,0,0]]
 * è§£é‡Šï¼šå”¯ä¸€å¯èƒ½çš„ä¸‰å…ƒç»„å’Œä¸º 0 ã€‚
 *
 *
 *
 *
 * æç¤ºï¼š
 *
 *
 * 3 <= nums.length <= 3000
 * -10^5 <= nums[i] <= 10^5
 *
 *
 */

// @lc code=start
/**
 * ğŸ¯ ä¸‰æ•°ä¹‹å’Œ - åŒæŒ‡é’ˆè§£æ³•
 *
 * ğŸ’¡ æ ¸å¿ƒæ€æƒ³ï¼š
 * 1. æ’åºæ•°ç»„ï¼Œå›ºå®šç¬¬ä¸€ä¸ªæ•°ï¼Œç”¨åŒæŒ‡é’ˆå¯»æ‰¾å¦å¤–ä¸¤ä¸ªæ•°
 * 2. å¯¹äºæ¯ä¸ªå›ºå®šçš„ nums[i]ï¼Œå¯»æ‰¾ nums[left] + nums[right] = -nums[i]
 * 3. åˆ©ç”¨æ’åºç‰¹æ€§ï¼Œé€šè¿‡ç§»åŠ¨æŒ‡é’ˆç¼©å°æœç´¢èŒƒå›´
 * 4. è·³è¿‡é‡å¤å…ƒç´ ï¼Œé¿å…é‡å¤çš„ä¸‰å…ƒç»„
 *
 * â° æ—¶é—´å¤æ‚åº¦ï¼šO(nÂ²)
 * ğŸ’¾ ç©ºé—´å¤æ‚åº¦ï¼šO(1) (ä¸è®¡ç®—ç»“æœæ•°ç»„)
 */
function threeSum(nums: number[]): number[][] {
  const result: number[][] = [];
  const len = nums.length;

  // ğŸš« è¾¹ç•Œæ£€æŸ¥ï¼šæ•°ç»„é•¿åº¦å°äº3æ— æ³•å½¢æˆä¸‰å…ƒç»„
  if (len < 3) return result;

  // ğŸ“Š æ’åºæ•°ç»„ï¼Œä¸ºåŒæŒ‡é’ˆç®—æ³•åšå‡†å¤‡
  nums.sort((a, b) => a - b);

  // ğŸ” éå†æ•°ç»„ï¼Œå›ºå®šç¬¬ä¸€ä¸ªæ•°
  for (let i = 0; i < len - 2; i++) {
    // âš¡ ä¼˜åŒ–ï¼šå¦‚æœå½“å‰æ•°å¤§äº0ï¼Œåé¢éƒ½æ˜¯æ­£æ•°ï¼Œä¸å¯èƒ½å’Œä¸º0
    if (nums[i] > 0) break;

    // ğŸ”„ è·³è¿‡é‡å¤çš„ç¬¬ä¸€ä¸ªæ•°ï¼Œé¿å…é‡å¤çš„ä¸‰å…ƒç»„
    if (i > 0 && nums[i] === nums[i - 1]) continue;

    // ğŸ¯ è®¾ç½®åŒæŒ‡é’ˆ
    let left = i + 1; // å·¦æŒ‡é’ˆï¼šä» i+1 å¼€å§‹
    let right = len - 1; // å³æŒ‡é’ˆï¼šä»æ•°ç»„æœ«å°¾å¼€å§‹

    // ğŸ” åŒæŒ‡é’ˆæœç´¢
    while (left < right) {
      // ğŸ§® è®¡ç®—å½“å‰ä¸‰æ•°ä¹‹å’Œ
      const sum = nums[i] + nums[left] + nums[right];

      if (sum < 0) {
        // ğŸ“ˆ å’Œå°äº0ï¼Œéœ€è¦å¢å¤§ï¼Œç§»åŠ¨å·¦æŒ‡é’ˆ
        left++;
      } else if (sum > 0) {
        // ğŸ“‰ å’Œå¤§äº0ï¼Œéœ€è¦å‡å°ï¼Œç§»åŠ¨å³æŒ‡é’ˆ
        right--;
      } else {
        // ğŸŠ æ‰¾åˆ°ç›®æ ‡ä¸‰å…ƒç»„ï¼
        result.push([nums[i], nums[left], nums[right]]);

        // ğŸ”„ è·³è¿‡é‡å¤çš„å·¦æŒ‡é’ˆå€¼
        while (left < right && nums[left] === nums[left + 1]) {
          left++;
        }

        // ğŸ”„ è·³è¿‡é‡å¤çš„å³æŒ‡é’ˆå€¼
        while (left < right && nums[right] === nums[right - 1]) {
          right--;
        }

        // â¡ï¸ ç§»åŠ¨åŒæŒ‡é’ˆç»§ç»­æœç´¢
        left++;
        right--;
      }
    }
  }

  return result;
}

/**
 * ğŸ§® ç®—æ³•è¯¦ç»†è§£é‡Šï¼š
 *
 * 1ï¸âƒ£ æ’åºçš„ä½œç”¨ï¼š
 *    - ä½¿æ•°ç»„æœ‰åºï¼Œå¯ä»¥ä½¿ç”¨åŒæŒ‡é’ˆæŠ€å·§
 *    - ä¾¿äºè·³è¿‡é‡å¤å…ƒç´ 
 *    - å¯ä»¥è¿›è¡Œå‰ªæä¼˜åŒ–ï¼ˆå½“nums[i] > 0æ—¶æå‰é€€å‡ºï¼‰
 *
 * 2ï¸âƒ£ åŒæŒ‡é’ˆç§»åŠ¨ç­–ç•¥ï¼š
 *    - sum < 0ï¼šå·¦æŒ‡é’ˆå³ç§»ï¼ˆå¢å¤§sumï¼‰
 *    - sum > 0ï¼šå³æŒ‡é’ˆå·¦ç§»ï¼ˆå‡å°sumï¼‰
 *    - sum = 0ï¼šè®°å½•ç»“æœï¼ŒåŒæŒ‡é’ˆåŒæ—¶ç§»åŠ¨
 *
 * 3ï¸âƒ£ å»é‡å¤ç­–ç•¥ï¼š
 *    - å¤–å±‚å¾ªç¯ï¼šè·³è¿‡ç›¸åŒçš„ nums[i]
 *    - å†…å±‚å¾ªç¯ï¼šæ‰¾åˆ°ç­”æ¡ˆåè·³è¿‡ç›¸åŒçš„ nums[left] å’Œ nums[right]
 *
 * 4ï¸âƒ£ ä¼˜åŒ–æŠ€å·§ï¼š
 *    - å½“ nums[i] > 0 æ—¶æå‰é€€å‡ºï¼ˆåç»­éƒ½æ˜¯æ­£æ•°ï¼‰
 *    - è¾¹ç•Œæ£€æŸ¥é¿å…æ— æ•ˆè®¡ç®—
 */

/**
 * ğŸ“ æ‰§è¡Œç¤ºä¾‹ï¼šnums = [-1,0,1,2,-1,-4]
 *
 * é¢„å¤„ç†ï¼š
 * - æ’åºåï¼š[-4,-1,-1,0,1,2]
 * - é•¿åº¦ï¼š6
 *
 * ç¬¬1è½®ï¼ši=0, nums[i]=-4
 * - left=1(-1), right=5(2)
 * - sum = -4+(-1)+2 = -3 < 0 â†’ left++
 * - left=2(-1), right=5(2)
 * - sum = -4+(-1)+2 = -3 < 0 â†’ left++
 * - left=3(0), right=5(2)
 * - sum = -4+0+2 = -2 < 0 â†’ left++
 * - left=4(1), right=5(2)
 * - sum = -4+1+2 = -1 < 0 â†’ left++
 * - left=5 >= right=5ï¼Œç»“æŸ
 *
 * ç¬¬2è½®ï¼ši=1, nums[i]=-1
 * - left=2(-1), right=5(2)
 * - sum = -1+(-1)+2 = 0 âœ“ æ‰¾åˆ° [-1,-1,2]
 * - è·³è¿‡é‡å¤ï¼Œleft=3, right=4
 * - left=3(0), right=4(1)
 * - sum = -1+0+1 = 0 âœ“ æ‰¾åˆ° [-1,0,1]
 * - left=4, right=3ï¼Œç»“æŸ
 *
 * ç¬¬3è½®ï¼ši=2, nums[i]=-1
 * - è·³è¿‡é‡å¤ï¼šnums[2] === nums[1]ï¼Œcontinue
 *
 * ç»“æœï¼š[[-1,-1,2], [-1,0,1]]
 */
// @lc code=end
