/*
 * @lc app=leetcode.cn id=304 lang=typescript
 *
 * [304] äºŒç»´åŒºåŸŸå’Œæ£€ç´¢ - çŸ©é˜µä¸å¯å˜
 *
 * https://leetcode.cn/problems/range-sum-query-2d-immutable/description/
 *
 * algorithms
 * Medium (63.46%)
 * Likes:    619
 * Dislikes: 0
 * Total Accepted:    164.7K
 * Total Submissions: 259.5K
 * Testcase Example:  '["NumMatrix","sumRegion","sumRegion","sumRegion"]\n' +
  '[[[[3,0,1,4,2],[5,6,3,2,1],[1,2,0,1,5],[4,1,0,1,7],[1,0,3,0,5]]],[2,1,4,3],[1,1,2,2],[1,2,2,4]]'
 *
 * ç»™å®šä¸€ä¸ªäºŒç»´çŸ©é˜µ matrixï¼Œä»¥ä¸‹ç±»å‹çš„å¤šä¸ªè¯·æ±‚ï¼š
 * 
 * 
 * è®¡ç®—å…¶å­çŸ©å½¢èŒƒå›´å†…å…ƒç´ çš„æ€»å’Œï¼Œè¯¥å­çŸ©é˜µçš„ å·¦ä¸Šè§’ ä¸º (row1,Â col1) ï¼Œå³ä¸‹è§’ ä¸º (row2,Â col2) ã€‚
 * 
 * 
 * å®ç° NumMatrix ç±»ï¼š
 * 
 * 
 * NumMatrix(int[][] matrix)Â ç»™å®šæ•´æ•°çŸ©é˜µ matrix è¿›è¡Œåˆå§‹åŒ–
 * int sumRegion(int row1, int col1, int row2, int col2)Â è¿”å› å·¦ä¸Šè§’ (row1,Â col1)
 * ã€å³ä¸‹è§’Â (row2,Â col2) æ‰€æè¿°çš„å­çŸ©é˜µçš„å…ƒç´  æ€»å’Œ ã€‚
 * 
 * 
 * 
 * 
 * ç¤ºä¾‹ 1ï¼š
 * 
 * 
 * 
 * 
 * è¾“å…¥: 
 * ["NumMatrix","sumRegion","sumRegion","sumRegion"]
 * 
 * [[[[3,0,1,4,2],[5,6,3,2,1],[1,2,0,1,5],[4,1,0,1,7],[1,0,3,0,5]]],[2,1,4,3],[1,1,2,2],[1,2,2,4]]
 * è¾“å‡º: 
 * [null, 8, 11, 12]
 * 
 * è§£é‡Š:
 * NumMatrix numMatrix = new
 * NumMatrix([[3,0,1,4,2],[5,6,3,2,1],[1,2,0,1,5],[4,1,0,1,7],[1,0,3,0,5]]);
 * numMatrix.sumRegion(2, 1, 4, 3); // return 8 (çº¢è‰²çŸ©å½¢æ¡†çš„å…ƒç´ æ€»å’Œ)
 * numMatrix.sumRegion(1, 1, 2, 2); // return 11 (ç»¿è‰²çŸ©å½¢æ¡†çš„å…ƒç´ æ€»å’Œ)
 * numMatrix.sumRegion(1, 2, 2, 4); // return 12 (è“è‰²çŸ©å½¢æ¡†çš„å…ƒç´ æ€»å’Œ)
 * 
 * 
 * 
 * 
 * æç¤ºï¼š
 * 
 * 
 * m == matrix.length
 * n == matrix[i].length
 * 1 <= m,Â n <=Â 200
 * -10^5Â <= matrix[i][j] <= 10^5
 * 0 <= row1 <= row2 < m
 * 0 <= col1 <= col2 < n
 * æœ€å¤šè°ƒç”¨ 10^4 æ¬¡Â sumRegion æ–¹æ³•
 * 
 * 
 */

// @lc code=start

/**
 * äºŒç»´å‰ç¼€å’Œï¼ˆäºŒç»´åŒºåŸŸå’Œæ£€ç´¢ï¼‰
 *
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * æ ¸å¿ƒæ€æƒ³ï¼šé¢„å¤„ç†äºŒç»´å‰ç¼€å’Œæ•°ç»„ï¼Œå®ç° O(1) æ—¶é—´å¤æ‚åº¦æŸ¥è¯¢
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 *
 * ã€é—®é¢˜åˆ†æã€‘
 * - çŸ©é˜µä¸å¯å˜ï¼Œä½†ä¼šæœ‰å¤šæ¬¡æŸ¥è¯¢ï¼ˆæœ€å¤š10^4æ¬¡ï¼‰
 * - å¦‚æœæ¯æ¬¡æŸ¥è¯¢éƒ½éå†çŸ©é˜µï¼Œæ—¶é—´å¤æ‚åº¦ O(mÃ—n)ï¼Œæ€»ä½“ O(10^4Ã—mÃ—n)ï¼Œå¤ªæ…¢
 * - ä½¿ç”¨å‰ç¼€å’Œé¢„å¤„ç†ï¼Œæ¯æ¬¡æŸ¥è¯¢åªéœ€ O(1)
 *
 * ã€äºŒç»´å‰ç¼€å’Œå®šä¹‰ã€‘
 * prefixSum[i][j] è¡¨ç¤ºä» (0,0) åˆ° (i-1,j-1) çš„çŸ©å½¢åŒºåŸŸçš„å…ƒç´ æ€»å’Œ
 *
 * ä¾‹å¦‚ï¼šmatrix = [
 *   [3, 0, 1, 4, 2],
 *   [5, 6, 3, 2, 1],
 *   [1, 2, 0, 1, 5],
 *   [4, 1, 0, 1, 7],
 *   [1, 0, 3, 0, 5]
 * ]
 *
 * prefixSum[2][3] = ä»(0,0)åˆ°(1,2)çš„å’Œ = 3+0+1+5+6+3 = 18
 *
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * ã€æ„å»ºå‰ç¼€å’Œæ•°ç»„ã€‘- å®¹æ–¥åŸç†
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 *
 * è§†è§‰å›¾è§£ï¼šè®¡ç®— prefixSum[i][j]
 *
 *     0   1   2   3      j
 *   â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”
 * 0 â”‚   â”‚   â”‚   â”‚   â”‚
 *   â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤
 * 1 â”‚   â”‚ A â”‚ B â”‚   â”‚  A = prefixSum[i-1][j-1]
 *   â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤  B = prefixSum[i-1][j] - A
 * 2 â”‚   â”‚ C â”‚ X â”‚   â”‚  C = prefixSum[i][j-1] - A
 *   â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤  X = matrix[i-1][j-1]ï¼ˆå½“å‰è¦åŠ çš„å…ƒç´ ï¼‰
 * i â”‚   â”‚   â”‚   â”‚   â”‚
 *   â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜
 *
 * prefixSum[i][j] = A + B + C + X
 *                 = prefixSum[i-1][j-1] + (prefixSum[i-1][j] - prefixSum[i-1][j-1])
 *                   + (prefixSum[i][j-1] - prefixSum[i-1][j-1]) + matrix[i-1][j-1]
 *                 = prefixSum[i-1][j] + prefixSum[i][j-1]
 *                   - prefixSum[i-1][j-1] + matrix[i-1][j-1]
 *
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * ã€æŸ¥è¯¢çŸ©å½¢åŒºåŸŸå’Œã€‘- å®¹æ–¥åŸç†ï¼ˆé‡ç‚¹ï¼ï¼‰
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 *
 * é—®é¢˜ï¼šå¦‚ä½•ç”¨å‰ç¼€å’Œå¿«é€Ÿè®¡ç®—ä»»æ„çŸ©å½¢åŒºåŸŸçš„å’Œï¼Ÿ
 *
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * ã€å…·ä½“ä¾‹å­ã€‘ç”¨æ•°å­—æ¼”ç¤ºï¼Œæ›´å®¹æ˜“ç†è§£ï¼
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 *
 * matrix = [
 *   [1, 2, 3],
 *   [4, 5, 6],
 *   [7, 8, 9]
 * ]
 *
 * ç›®æ ‡ï¼šè®¡ç®—ä» (1,1) åˆ° (2,2) çš„åŒºåŸŸå’Œï¼ˆå°±æ˜¯ 5+6+8+9 = 28ï¼‰
 *
 *       col0  col1  col2
 *     â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”
 * row0â”‚  1  â”‚  2  â”‚  3  â”‚
 *     â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
 * row1â”‚  4  â”‚ [5] â”‚ [6] â”‚  â† æˆ‘ä»¬æƒ³è¦çš„åŒºåŸŸï¼ˆè“è‰²æ¡†ï¼‰
 *     â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
 * row2â”‚  7  â”‚ [8] â”‚ [9] â”‚
 *     â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜
 *
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * ã€å®¹æ–¥åŸç† - é€æ­¥æ¨å¯¼ã€‘
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 *
 * ç¬¬1æ­¥ï¼šå…ˆç”»å‡ºæ‰€æœ‰ç›¸å…³çš„çŸ©å½¢åŒºåŸŸ
 *
 *       col0  col1  col2
 *     â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”
 * row0â”‚ â–“Aâ–“ â”‚ â–“Aâ–“ â”‚ â–“Bâ–“ â”‚  AåŒºåŸŸï¼ˆå·¦ä¸Šï¼‰
 *     â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
 * row1â”‚ â–“Câ–“ â”‚ â– Dâ–  â”‚ â– Dâ–  â”‚  DåŒºåŸŸï¼ˆç›®æ ‡ï¼‰
 *     â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤
 * row2â”‚ â–“Câ–“ â”‚ â– Dâ–  â”‚ â– Dâ–  â”‚
 *     â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜
 *        BåŒºåŸŸï¼ˆå·¦ä¾§ï¼‰
 *
 * å„åŒºåŸŸçš„å«ä¹‰ï¼š
 * - æ•´ä¸ªå¤§çŸ©å½¢(ä»0,0åˆ°2,2) = A + B + C + D = 1+2+3+4+5+6+7+8+9 = 45
 * - AåŒºåŸŸ(ä»0,0åˆ°0,0) = 1
 * - BåŒºåŸŸ(ä»0,0åˆ°0,2) = A + æ›´å¤š = 1+2+3 = 6
 * - CåŒºåŸŸ(ä»0,0åˆ°2,0) = A + æ›´å¤š = 1+4+7 = 12
 * - DåŒºåŸŸ(ä»1,1åˆ°2,2) = 5+6+8+9 = 28 â† è¿™æ˜¯æˆ‘ä»¬è¦çš„ï¼
 *
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * ç¬¬2æ­¥ï¼šç”¨å·²çŸ¥çš„å‰ç¼€å’Œæ¥è¡¨ç¤ºè¿™äº›åŒºåŸŸ
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 *
 * prefixSum[i][j] = ä»(0,0)åˆ°(i-1,j-1)çš„æ‰€æœ‰å…ƒç´ ä¹‹å’Œ
 *
 * prefixSum[3][3] = æ•´ä¸ªçŸ©é˜µ = 45       ï¼ˆå¤§çŸ©å½¢ï¼‰
 * prefixSum[1][3] = 1+2+3 = 6           ï¼ˆä¸Šæ–¹éœ€è¦å‡æ‰çš„ï¼‰
 * prefixSum[3][1] = 1+4+7 = 12          ï¼ˆå·¦ä¾§éœ€è¦å‡æ‰çš„ï¼‰
 * prefixSum[1][1] = 1                   ï¼ˆå·¦ä¸Šè§’ï¼‰
 *
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * ç¬¬3æ­¥ï¼šæ¨å¯¼ D åŒºåŸŸçš„å…¬å¼ï¼ˆå®¹æ–¥åŸç†çš„ç²¾é«“ï¼ï¼‰
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 *
 * æ€è·¯ï¼šä»å¤§çŸ©å½¢å¼€å§‹ï¼Œé€æ­¥å‡å»ä¸éœ€è¦çš„éƒ¨åˆ†
 *
 * ğŸ”¹ å°è¯•1ï¼šå¤§çŸ©å½¢ - ä¸Šæ–¹ - å·¦ä¾§ = ï¼Ÿ
 *
 *   45 - 6 - 12 = 27  âŒ é”™äº†ï¼åº”è¯¥æ˜¯28
 *
 *   ä¸ºä»€ä¹ˆé”™ï¼Ÿå› ä¸ºå·¦ä¸Šè§’çš„A(=1)è¢«å‡äº†ä¸¤æ¬¡ï¼
 *
 *   çœ‹å›¾å°±æ˜ç™½äº†ï¼š
 *   - å‡å»"ä¸Šæ–¹"æ—¶ï¼ŒåŒ…å«äº†A
 *   - å‡å»"å·¦ä¾§"æ—¶ï¼ŒåˆåŒ…å«äº†A
 *   - æ‰€ä»¥Aè¢«å‡äº†2æ¬¡ï¼Œä½†å®é™…åªåº”è¯¥å‡1æ¬¡
 *
 * ğŸ”¹ å°è¯•2ï¼šå¤§çŸ©å½¢ - ä¸Šæ–¹ - å·¦ä¾§ + å·¦ä¸Šè§’ = ï¼Ÿ
 *
 *   45 - 6 - 12 + 1 = 28  âœ… æ­£ç¡®ï¼
 *
 *   åŠ å›å·¦ä¸Šè§’ï¼Œå°±æŠŠå¤šå‡çš„é‚£ä¸€æ¬¡è¡¥å›æ¥äº†ï¼
 *
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * ç¬¬4æ­¥ï¼šç”¨å›¾å½¢å±•ç¤ºå®¹æ–¥åŸç†
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 *
 * ç›®æ ‡ï¼šæ±‚ D åŒºåŸŸ
 *
 * æ­¥éª¤1ï¼šå–å¤§çŸ©å½¢          æ­¥éª¤2ï¼šå‡å»ä¸Šæ–¹          æ­¥éª¤3ï¼šå‡å»å·¦ä¾§
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚        â”‚ â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ â”‚  â†å‡   â”‚ â–“           â”‚  â†å‡
 * â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚ â–“           â”‚
 * â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚        â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚        â”‚ â–“ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚        â”‚ â–“ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚
 *                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 *
 * é—®é¢˜ï¼šå·¦ä¸Šè§’ A è¢«å‡äº†ä¸¤æ¬¡ï¼ï¼ˆåœ¨æ­¥éª¤2å’Œæ­¥éª¤3ä¸­éƒ½è¢«å‡æ‰äº†ï¼‰
 *
 * æ­¥éª¤4ï¼šåŠ å›å·¦ä¸Šè§’A
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚ âœ“           â”‚  â†åŠ å›æ¥
 * â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 * â”‚   â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚
 * â”‚   â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 *
 * æœ€ç»ˆ â–‘â–‘â–‘ åŒºåŸŸå°±æ˜¯æˆ‘ä»¬è¦çš„ D åŒºåŸŸï¼
 *
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * ç¬¬5æ­¥ï¼šæ€»ç»“å…¬å¼
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 *
 * æŸ¥è¯¢ä» (row1, col1) åˆ° (row2, col2) çš„åŒºåŸŸå’Œï¼š
 *
 * D = å¤§çŸ©å½¢ - ä¸Šæ–¹çŸ©å½¢ - å·¦ä¾§çŸ©å½¢ + å·¦ä¸Šè§’çŸ©å½¢
 *
 * D = prefixSum[row2+1][col2+1]      â† ä»(0,0)åˆ°(row2,col2)
 *   - prefixSum[row1][col2+1]        â† ä»(0,0)åˆ°(row1-1,col2)ï¼ˆä¸Šæ–¹ï¼‰
 *   - prefixSum[row2+1][col1]        â† ä»(0,0)åˆ°(row2,col1-1)ï¼ˆå·¦ä¾§ï¼‰
 *   + prefixSum[row1][col1]          â† ä»(0,0)åˆ°(row1-1,col1-1)ï¼ˆå·¦ä¸Šè§’ï¼Œè¡¥å›å¤šå‡çš„ï¼‰
 *
 * è¿™å°±æ˜¯å®¹æ–¥åŸç†ï¼š
 * - "æ–¥"ï¼šæ’æ–¥æ‰ä¸éœ€è¦çš„éƒ¨åˆ†ï¼ˆå‡å»ä¸Šæ–¹å’Œå·¦ä¾§ï¼‰
 * - "å®¹"ï¼šåŒ…å®¹å›è¢«å¤šå‡çš„éƒ¨åˆ†ï¼ˆåŠ å›å·¦ä¸Šè§’ï¼‰
 */
class NumMatrix {
  private prefixSum: number[][];

  constructor(matrix: number[][]) {
    const m = matrix.length; // è¡Œæ•°
    const n = matrix[0].length; // åˆ—æ•°

    // åˆ›å»º (m+1) Ã— (n+1) çš„å‰ç¼€å’Œæ•°ç»„ï¼Œå¤šä¸€è¡Œä¸€åˆ—æ–¹ä¾¿å¤„ç†è¾¹ç•Œ
    // prefixSum[i][j] è¡¨ç¤ºä» (0,0) åˆ° (i-1,j-1) çš„çŸ©å½¢åŒºåŸŸå’Œ
    this.prefixSum = Array.from({ length: m + 1 }, () => Array(n + 1).fill(0));

    // æ„å»ºäºŒç»´å‰ç¼€å’Œæ•°ç»„
    for (let i = 1; i <= m; i++) {
      for (let j = 1; j <= n; j++) {
        // å®¹æ–¥åŸç†ï¼šå½“å‰æ ¼å­ = ä¸Šæ–¹ + å·¦æ–¹ - å·¦ä¸Šï¼ˆé‡å¤è®¡ç®—äº†ï¼‰ + å½“å‰å…ƒç´ 
        this.prefixSum[i][j] =
          this.prefixSum[i - 1][j] + // ä¸Šæ–¹çŸ©å½¢
          this.prefixSum[i][j - 1] - // å·¦æ–¹çŸ©å½¢
          this.prefixSum[i - 1][j - 1] + // å‡å»é‡å¤è®¡ç®—çš„å·¦ä¸Šè§’
          matrix[i - 1][j - 1]; // åŠ ä¸Šå½“å‰å…ƒç´ 
      }
    }
  }

  /**
   * æŸ¥è¯¢çŸ©å½¢åŒºåŸŸ (row1, col1) åˆ° (row2, col2) çš„å…ƒç´ æ€»å’Œ
   * æ—¶é—´å¤æ‚åº¦ï¼šO(1)
   */
  sumRegion(row1: number, col1: number, row2: number, col2: number): number {
    // å®¹æ–¥åŸç†ï¼š
    // ç›®æ ‡åŒºåŸŸ = å¤§çŸ©å½¢ - ä¸Šæ–¹çŸ©å½¢ - å·¦ä¾§çŸ©å½¢ + å·¦ä¸Šè§’çŸ©å½¢ï¼ˆåŠ å›è¢«å‡äº†ä¸¤æ¬¡çš„éƒ¨åˆ†ï¼‰
    return (
      this.prefixSum[row2 + 1][col2 + 1] - // ä»(0,0)åˆ°(row2,col2)çš„å¤§çŸ©å½¢
      this.prefixSum[row1][col2 + 1] - // å‡å»ä»(0,0)åˆ°(row1-1,col2)çš„ä¸Šæ–¹çŸ©å½¢
      this.prefixSum[row2 + 1][col1] + // å‡å»ä»(0,0)åˆ°(row2,col1-1)çš„å·¦ä¾§çŸ©å½¢
      this.prefixSum[row1][col1] // åŠ å›ä»(0,0)åˆ°(row1-1,col1-1)çš„å·¦ä¸Šè§’ï¼ˆè¢«å‡äº†ä¸¤æ¬¡ï¼‰
    );
  }
}

/**
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * ã€å¤æ‚åº¦åˆ†æã€‘
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 *
 * æ—¶é—´å¤æ‚åº¦ï¼š
 * - æ„é€ å‡½æ•°ï¼šO(m Ã— n)ï¼Œéœ€è¦éå†æ•´ä¸ªçŸ©é˜µæ„å»ºå‰ç¼€å’Œ
 * - sumRegionï¼šO(1)ï¼Œåªéœ€è¦4æ¬¡æ•°ç»„è®¿é—®å’Œ3æ¬¡è¿ç®—
 *
 * ç©ºé—´å¤æ‚åº¦ï¼šO(m Ã— n)ï¼Œå­˜å‚¨å‰ç¼€å’Œæ•°ç»„
 *
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 * ã€ç¤ºä¾‹éªŒè¯ã€‘
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 *
 * matrix = [
 *   [3, 0, 1, 4, 2],
 *   [5, 6, 3, 2, 1],
 *   [1, 2, 0, 1, 5],
 *   [4, 1, 0, 1, 7],
 *   [1, 0, 3, 0, 5]
 * ]
 *
 * æŸ¥è¯¢ sumRegion(2, 1, 4, 3)ï¼šä» (2,1) åˆ° (4,3) çš„çŸ©å½¢
 *
 *     0  1  2  3  4
 *   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * 0 â”‚ 3  0  1  4  2â”‚
 * 1 â”‚ 5  6  3  2  1â”‚
 *   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
 * 2 â”‚ 1 [2  0  1] 5â”‚  â† ç›®æ ‡çŸ©å½¢
 * 3 â”‚ 4 [1  0  1] 7â”‚
 * 4 â”‚ 1 [0  3  0] 5â”‚
 *   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 *
 * è®¡ç®—ï¼š2+0+1+1+0+1+0+3+0 = 8 âœ“
 *
 * Your NumMatrix object will be instantiated and called as such:
 * var obj = new NumMatrix(matrix)
 * var param_1 = obj.sumRegion(row1,col1,row2,col2)
 */
// @lc code=end
